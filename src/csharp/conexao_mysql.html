<!DOCTYPE html>
<html>
<head>

	<title>Site</title>
	
	<!-- boostrap -->
	<link href="../../public/css/bootstrap.css" rel="stylesheet">

	<!-- font awesome -->
	<link href="../../public/css/all.css" rel="stylesheet">

	<!-- folha de estilo propria -->
	<link href="../../public/css/style.css" rel="stylesheet">

	<!-- favicon -->
	<link href="../../public/alfahelix/public/img/favicon.png" rel="icon">


</head>
<body>
	 
		  <!-- inicio menu -->
  <nav class="navbar navbar-dark navbar-expand-lg navbar-default fixed-top">
    <div class="container-fluid"> 
      <h2 id="menuletra"> MVC ##</h2> 
      <!-- botao para menu no celular --> 
      <button class="navbar-toggler" data-toggle="collapse" data-target="#menu" aria-expanded="false">
        <span class="navbar-toggler-icon"></span>
      </button>      
      <div class="collapse navbar-collapse" id="menu">
        <ul class="navbar-nav ml-md-auto text-light">
          <li class="nav-item">
            <a class="nav-link" id="menuletra"  href="../../index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="menuletra"  href="../../list_curso.html">Cursos</a>
          </li>
            <li class="nav-item">
            <a class="nav-link" id="menuletra"  href="../../perfil.html">Perfil</a>
          </li>                   
        </ul>
      </div>
    </div>
  </nav>
  <br>
  <br>
  <br>
	<!-- fim menu -->

	<div class="container margemtop">
		<h4>Banco de Dados Mysql</h4>
		<!-- # SeCtion 01-->	
		<div id="list-example" class="list-group">
			<a class="list-group-item list-group-item-action" href="#section01" data-toggle="collapse"  role="button" aria-expanded="false" aria-controls="collapseExample">Sobre a Class Context</a>			  
			<div class="section01 collapse" id="section01" >
				<div class="container">
				<br>					
					<div class="divpai"> 

						<h4>Instalando os pacotes via NuGet</h4>
						<hr>						
						<p>Para acessar o MySQL via Entity Framework devemos instalar o pacote MySql.Data.Entity, que trará junto dois outrospacotes dos quais depende: MySql.Data e EntityFramework.</p>
						<br>
						<p>O processo de instalação é demonstrado na sequência de imagens abaixo:</p>
						<br>
						<!-- Carroceu -->

						<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
						  <ol class="carousel-indicators">
						    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
						    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
						    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
						    <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
						  </ol>
						  <div class="carousel-inner">
						    <div class="carousel-item active">						      
						      <img class="d-block w-100" src="../../public/img/csharp/conexao_mysql/instalando_Mysql_01.jpg">
						    </div>
						    <div class="carousel-item">
						      <img class="d-block w-100" src="../../public/img/csharp/conexao_mysql/instalando_Mysql_02.jpg">
						    </div>
						    <div class="carousel-item">
						      <img class="d-block w-100" src="../../public/img/csharp/conexao_mysql/instalando_Mysql_03.jpg">
						    </div>
						     <div class="carousel-item">
						      <img class="d-block w-100" src="../../public/img/csharp/conexao_mysql/instalando_Mysql_04.jpg">
						    </div>
						  </div>
						  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
						    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
						    <span class="sr-only">Previous</span>
						  </a>
						  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
						    <span class="carousel-control-next-icon" aria-hidden="true"></span>
						    <span class="sr-only">Next</span>
						  </a>
						</div>
					
						<br>
						<p>Configurações da aplicação</p>
						<br>
						<p>Após a instalação dos pacotes automaticamente serão adicionadas algumas configurações no arquivo App.config ou Web.config. A primeira delas é o registro do provider MySql.Data.MySqlClient, como vemos abaixo:</p>
						<br>
						<p><img style="width:100%;" src="../../public/img/csharp/conexao_mysql/string_provider.jpg">	</p>
						<br>
						<div class="divpai">
							<p>< provider invariantName="MySql.Data.MySqlClient"</p>
							<div class="divpai">
					            <p>type="MySql.Data.MySqlClient.MySqlProviderServices,</p>
					            <div class="divpai">
				                    <p>MySql.Data.Entity.EF6, Version=6.9.9.0, Culture=neutral,</p>
				                    <p>PublicKeyToken=c5687fc88969c44d"/></p>
				                </div>
		                	</div>
		              	</div>

						<br>

						<p>Outra configuração importante é o registro do DbProviderFactory, elemento interno do Entity Framework que define quais classes devem ser usadas para acessar o banco de dados:</p>
						<br>

						<p><img style="width:100%;" src="../../public/img/csharp/conexao_mysql/string_dbproviderfactories.jpg">	</p>
						<br>
						<p>< DbProviderFactories></p>
						   <p>< remove invariant="MySql.Data.MySqlClient" /></p>
						   <p>< add name="MySQL Data Provider"</p>
						         <p>invariant="MySql.Data.MySqlClient"</p>
						         <p>description=".Net Framework Data Provider for MySQL"</p>
						         <p>type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data,</p>
						         <p>Version=6.9.9.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" /></p>
						  <p>< /DbProviderFactories></p>
						  <br>

						<p>A próxima configuração é a string de conexão, que deve ser adicionada por nós com a seguintes estrutura:</p>
						<br>

						<p><img style="width:100%;" src="../../public/img/csharp/conexao_mysql/string_connection.jpg"></p>
						<br>
						<p>< connectionStrings></p>
						   <p>< add name="MySqlVendas"</p>
						        <p>providerName="MySql.Data.MySqlClient"</p>
						        <p>connectionString="server=localhost;port=3306;</p>
						                          <p>database=bd_vendas;uid=root;password="/></p>
						  <p>< /connectionStrings></p>
						  <br>

						<p>Linha 2: o atributo name será referenciado no construtor do DbContext para indicar qual string de conexão deve ser usada;</p>
						<br>

						<p>Linha 3: o atributo providerName faz referência ao provider definido anteriormente no arquivo de configuração;</p>
						<br>

						<p>Linhas 4 e 5: a string de conexão é composta pelos parâmetros server (endereço do servidor), port (porta em que o servidor do MySQL está rodando), database (nome do banco a ser acessado), uid(login do usuário) e password (senha - neste caso está em branco).</p>
						<br>

						<p>A partir daqui podemos usar o Entity Framework da mesma forma para qualquer banco. Por exemplo, o DbContext pode ter a seguinte estrutura, referenciando a string de conexão definida anteriormente:</p>
						<br>

						<p><img style="width:100%;" src="../../public/img/csharp/conexao_mysql/class_dbcontext.jpg"></p>
						<br>
						<p>public class VendasContext : DbContext</p>
						  <p>{</p>
						     <p>public VendasContext() : base("MySqlVendas")</p>
						     <p>{</p>
						     <p>}</p>
						     <p>public DbSet< Produto> Produtos { get; set; }}</p>
						

					</div>
				</p>
			</div>
		</div>
		<!-- # SeCtion 01-->
	</div>
	<script src="../../public/js/jquery.js"></script>
	<script src="../../public/js/bootstrap.bundle.min.js"></script>
	

</body>
</html>